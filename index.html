<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>BDRRMC Self-Assessment</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: auto;
      padding: 20px;
    }
    input, select {
      width: 100%;
      margin-bottom: 15px;
      padding: 8px;
    }
    button {
      padding: 10px 20px;
      margin-right: 10px;
    }
  </style>
</head>
<body>
  <h2>BDRRMC Self-Assessment</h2>

  <label>Municipality:</label>
  <input type="text" id="municipality">

  <label>Barangay:</label>
  <input type="text" id="barangay">

  <label>2.1.1 Structure (Yes/No):</label>
  <select id="structure">
    <option value="yes">Yes</option>
    <option value="no">No</option>
  </select>

  <label>2.1.2 Plan (Yes/No):</label>
  <select id="plan">
    <option value="yes">Yes</option>
    <option value="no">No</option>
  </select>

  <label>Estimated Revenue From Regular Sources:</label>
  <input type="number" id="revenue">

  <label>BDRRMF for FY 2024:</label>
  <input type="number" id="budget">

  <button onclick="evaluate()">Evaluate</button>
  <button onclick="resetForm()">Reset</button>

  <script>
    function evaluate() {
      const muni = document.getElementById("municipality").value;
      const brgy = document.getElementById("barangay").value;
      const structure = document.getElementById("structure").value;
      const plan = document.getElementById("plan").value;
      const revenue = parseFloat(document.getElementById("revenue").value);
      const budget = parseFloat(document.getElementById("budget").value);

      const resStructure = structure === "yes" ? "Passed" : "Failed";
      const resPlan = plan === "yes" ? "Passed" : "Failed";
      const percentage = revenue > 0 ? (budget / revenue) * 100 : 0;
      const resBudget = percentage >= 5 ? "Passed" : "Failed";

      const overall = (resStructure === "Passed" && resPlan === "Passed" && resBudget === "Passed") ? "PASSED" : "FAILED";

      const resultHTML = `
        <html>
        <head>
          <title>Assessment Result</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 20px; }
            h2 { color: #333; }
            .passed { color: green; }
            .failed { color: red; }
          </style>
        </head>
        <body>
          <h2>BDRRMC Self-Assessment Result</h2>
          <p><strong>Municipality:</strong> ${muni}</p>
          <p><strong>Barangay:</strong> ${brgy}</p>
          <hr>
          <p><strong>2.1.1 Structure:</strong> ${resStructure}</p>
          <p><strong>2.1.2 Plan:</strong> ${resPlan}</p>
          <p><strong>2.1.3 Budget:</strong> ${resBudget} (${percentage.toFixed(2)}%)</p>
          <hr>
          <h3 class="${overall === "PASSED" ? 'passed' : 'failed'}">OVERALL: ${overall}</h3>
        </body>
        </html>
      `;

      const resultWindow = window.open("", "_blank");
      resultWindow.document.open();
      resultWindow.document.write(resultHTML);
      resultWindow.document.close();
    }

    function resetForm() {
      document.getElementById("municipality").value = "";
      document.getElementById("barangay").value = "";
      document.getElementById("structure").value = "yes";
      document.getElementById("plan").value = "yes";
      document.getElementById("revenue").value = "";
      document.getElementById("budget").value = "";
    }
  </script>
</body>
</html>
